# -*- coding: utf-8 -*-
import numpy as np

# # -*- coding: utf-8 -*-
# import numpy as np
# 
# # Parameters of OCV fit function:
# # SOC range of data: array([9.07518731e-08, 9.99999126e-01])
# # E0: [0.228360036975706, 0.11789910897556077, 0.08772221351583766]
# # a: [-0.5754982719681626, -1.798653353715041, -37.01366856107025]
# # Î”x: [0.17040245711448282, 0.5771945488092826, 0.2524029940762347]
# # Knots of interpolating spline:
# # [0.001      0.01103015 0.0210603  0.03610553 0.06619598 0.12637688
# #  0.19157286 0.25175377 0.50250754 0.62788442 0.75326131 0.81845729
# #  0.87863819 0.9388191  0.96890955 0.98395477 0.99398492 0.999     ]
# # Coefficients of this spline:
# # [ 0.45621556  0.35922861  0.32929504  0.29737165  0.26561139  0.21471894
# #   0.1593352   0.14417633  0.12285669  0.10714401  0.08688528  0.08862177
# #   0.08683416  0.0869518   0.08334538  0.06880183  0.06173914  0.03050433
# #  -0.00420148]


def OCV_Curve_Fit(SOC):

    return (

          (SOC < 0.011030150753768845) * ((

              815.2779813977784 * SOC

            + -20.969637168513454) * SOC

            + 0.4763699178538136)

        + (SOC >= 0.011030150753768845) * (SOC < 0.02106030150753769) * ((

              21.842378034163403 * SOC

            + -3.4662085314970206) * SOC

            + 0.3798371895667505)

        + (SOC >= 0.02106030150753769) * (SOC < 0.03610552763819096) * ((

              37.848234754030955 * SOC

            + -4.1403848683107505) * SOC

            + 0.38693636802802256)

        + (SOC >= 0.03610552763819096) * (SOC < 0.06619597989949749) * ((

              4.648985924834719 * SOC

            + -1.7430320759712963) * SOC

            + 0.3436575242768695)

        + (SOC >= 0.06619597989949749) * (SOC < 0.12637688442211056) * ((

              2.027783392771731 * SOC

            + -1.3960059357213885) * SOC

            + 0.332171656574578)

        + (SOC >= 0.12637688442211056) * (SOC < 0.19157286432160803) * ((

              4.921033374816076 * SOC

            + -2.1272857728915726) * SOC

            + 0.378380090305716)

        + (SOC >= 0.19157286432160803) * (SOC < 0.2517537688442211) * ((

              0.8697131732503687 * SOC

            + -0.575039742295695) * SOC

            + 0.2296959811991671)

        + (SOC >= 0.2517537688442211) * (SOC < 0.5025075376884423) * ((

              0.10684499992410768 * SOC

            + -0.19092986676331103) * SOC

            + 0.18134542679138577)

        + (SOC >= 0.5025075376884423) * (SOC < 0.6278844221105527) * ((

              -0.311196136145111 * SOC

            + 0.22920777711393292) * SOC

            + 0.07578426033389707)

        + (SOC >= 0.6278844221105527) * (SOC < 0.7532613065326633) * ((

              0.7170641139146756 * SOC

            + -1.0620494086621486) * SOC

            + 0.4811643962774539)

        + (SOC >= 0.7532613065326633) * (SOC < 0.8184572864321608) * ((

              -0.35845501182590134 * SOC

            + 0.5582444750502802) * SOC

            + -0.12908794762860065)

        + (SOC >= 0.8184572864321608) * (SOC < 0.8786381909547738) * ((

              0.2531577697048881 * SOC

            + -0.4429133999875532) * SOC

            + 0.2806145312182249)

        + (SOC >= 0.8786381909547738) * (SOC < 0.938819095477387) * ((

              -0.6800889068671427 * SOC

            + 1.1970589432480487) * SOC

            + -0.439856635219968)

        + (SOC >= 0.938819095477387) * (SOC < 0.9689095477386934) * ((

              -9.38062765357001 * SOC

            + 17.533522775939147) * SOC

            + -8.10834873457302)

        + (SOC >= 0.9689095477386934) * (SOC < 0.9839547738693467) * ((

              2.6958703171999616 * SOC

            + -5.868545598312835) * SOC

            + 3.2288950077501966)

        + (SOC >= 0.9839547738693467) * (SOC < 0.9939849246231156) * ((

              -178.9009044997625 * SOC

            + 351.4974814025411) * SOC

            + -172.58710913535577)

        + (SOC >= 0.9939849246231156) * ((

              -965.9345902438997 * SOC

            + 1916.0967190030192) * SOC

            + -950.1811367612034)

    )



def derivative_OCV_Curve_Fit(SOC):

    return (

          (SOC < 0.011030150753768845) * (

              1630.5559627955568 * SOC

            + -20.969637168513454)

        + (SOC >= 0.011030150753768845) * (SOC < 0.02106030150753769) * (

              43.684756068326806 * SOC

            + -3.4662085314970206)

        + (SOC >= 0.02106030150753769) * (SOC < 0.03610552763819096) * (

              75.69646950806191 * SOC

            + -4.1403848683107505)

        + (SOC >= 0.03610552763819096) * (SOC < 0.06619597989949749) * (

              9.297971849669437 * SOC

            + -1.7430320759712963)

        + (SOC >= 0.06619597989949749) * (SOC < 0.12637688442211056) * (

              4.055566785543462 * SOC

            + -1.3960059357213885)

        + (SOC >= 0.12637688442211056) * (SOC < 0.19157286432160803) * (

              9.842066749632153 * SOC

            + -2.1272857728915726)

        + (SOC >= 0.19157286432160803) * (SOC < 0.2517537688442211) * (

              1.7394263465007374 * SOC

            + -0.575039742295695)

        + (SOC >= 0.2517537688442211) * (SOC < 0.5025075376884423) * (

              0.21368999984821535 * SOC

            + -0.19092986676331103)

        + (SOC >= 0.5025075376884423) * (SOC < 0.6278844221105527) * (

              -0.622392272290222 * SOC

            + 0.22920777711393292)

        + (SOC >= 0.6278844221105527) * (SOC < 0.7532613065326633) * (

              1.4341282278293512 * SOC

            + -1.0620494086621486)

        + (SOC >= 0.7532613065326633) * (SOC < 0.8184572864321608) * (

              -0.7169100236518027 * SOC

            + 0.5582444750502802)

        + (SOC >= 0.8184572864321608) * (SOC < 0.8786381909547738) * (

              0.5063155394097762 * SOC

            + -0.4429133999875532)

        + (SOC >= 0.8786381909547738) * (SOC < 0.938819095477387) * (

              -1.3601778137342855 * SOC

            + 1.1970589432480487)

        + (SOC >= 0.938819095477387) * (SOC < 0.9689095477386934) * (

              -18.76125530714002 * SOC

            + 17.533522775939147)

        + (SOC >= 0.9689095477386934) * (SOC < 0.9839547738693467) * (

              5.391740634399923 * SOC

            + -5.868545598312835)

        + (SOC >= 0.9839547738693467) * (SOC < 0.9939849246231156) * (

              -357.801808999525 * SOC

            + 351.4974814025411)

        + (SOC >= 0.9939849246231156) * (

              -1931.8691804877994 * SOC

            + 1916.0967190030192)

    )


